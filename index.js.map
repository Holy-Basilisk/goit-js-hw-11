{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport response from \"./js/response\";\nimport * as responses from \"./js/response\";\n\nconst form = document.querySelector('.form');\nconst btn = document.querySelector('.search-btn');\nconst gallery = document.querySelector(\".gallery\");\n\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault()\n    const searchRequest = event.target.elements.searchRequest.value.trim();\n    if (searchRequest === '') {\n        iziToast.show({\n            class: 'toast-message',\n            message: `Fill search field please`,\n            messageColor: '#fff',\n            backgroundColor: '#59A10D',\n            border: '2px solid #B5EA7C',\n            position: 'topRight',\n        })\n        return\n    }\n    gallery.innerHTML = '<span class=\"loader\">Loading</span>';\n    console.log(searchRequest)\n        \n    fetchImages(searchRequest)\n        .then((images) => renderImages(images))\n        .catch((error) => console.log(error));\n});\n\nfunction fetchImages(searchRequest) {\n    // return getResponse()\n    return fetch(buildRequestURL(searchRequest)).then(\n        (response) => {\n        if (!response.ok) {\n            throw new Error(response.status);\n        }\n        console.log(response)\n        return response.json().hits;\n        }\n    );\n}\n\nfunction getResponse() {\n    return Promise.resolve(responses.empty.hits)\n}\n\nfunction buildRequestURL(q) {\n    const host = 'https://pixabay.com/api/'\n    const key = '46357253-cea0b9d68f62a9d404cc68056';\n    let image_type = 'photo';\n    let orientation = 'horizontal';\n    let safesearch = true;\n    const searchParams = new URLSearchParams({\n        key,\n        q,\n        image_type,\n        orientation,\n        safesearch\n    })\n    return `${host}?${searchParams}`\n\n}\n\nfunction renderImages(images) {\n    console.log(images)\n    if (images.length === 0) {\n        iziToast.show({\n            class: 'toast-message',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: '#fff',\n            iconUrl: 'img/error-icon.svg',\n            iconColor: '#fff',\n            backgroundColor: '#EF4040',\n            border: '2px solid #FFBEBE',\n            position: 'topRight',\n        })\n        return\n    }\n    const markup = images.reduce((string, image) =>  {\n        return `${string}\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img \n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n                />\n            </a>\n        </li>`\n    }, '');\n    \n    gallery.innerHTML = markup;\n\n    new SimpleLightbox('.gallery-link', {captionsData: 'alt', overlayOpacity: 0.5});\n}\n\n// const markup = images.map((image) => {\n//     return `<li>\n//         <p><b>Name</b>: ${image.name}</p>\n//         <p><b>Email</b>: ${image.email}</p>\n//         <p><b>Company</b>: ${image.company.name}</p>\n//         </li>`;\n//     })\n//     .join(\"\");\n\n// gallery.innerHTML = markup;\n"],"names":["form","gallery","event","searchRequest","iziToast","fetchImages","images","renderImages","error","buildRequestURL","response","q","host","key","image_type","orientation","safesearch","searchParams","markup","string","image","SimpleLightbox"],"mappings":"6vBASA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAC/B,SAAS,cAAc,aAAa,EAChD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAGjDD,EAAK,iBAAiB,SAAWE,GAAU,CACvCA,EAAM,eAAgB,EACtB,MAAMC,EAAgBD,EAAM,OAAO,SAAS,cAAc,MAAM,OAChE,GAAIC,IAAkB,GAAI,CACtBC,EAAS,KAAK,CACV,MAAO,gBACP,QAAS,2BACT,aAAc,OACd,gBAAiB,UACjB,OAAQ,oBACR,SAAU,UACtB,CAAS,EACD,MACH,CACDH,EAAQ,UAAY,sCACpB,QAAQ,IAAIE,CAAa,EAEzBE,EAAYF,CAAa,EACpB,KAAMG,GAAWC,EAAaD,CAAM,CAAC,EACrC,MAAOE,GAAU,QAAQ,IAAIA,CAAK,CAAC,CAC5C,CAAC,EAED,SAASH,EAAYF,EAAe,CAEhC,OAAO,MAAMM,EAAgBN,CAAa,CAAC,EAAE,KACxCO,GAAa,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,eAAQ,IAAIA,CAAQ,EACbA,EAAS,KAAM,EAAC,IACtB,CACT,CACA,CAMA,SAASD,EAAgBE,EAAG,CACxB,MAAMC,EAAO,2BACPC,EAAM,qCACZ,IAAIC,EAAa,QACbC,EAAc,aACdC,EAAa,GACjB,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAAJ,EACA,EAAAF,EACA,WAAAG,EACA,YAAAC,EACA,WAAAC,CACR,CAAK,EACD,MAAO,GAAGJ,CAAI,IAAIK,CAAY,EAElC,CAEA,SAASV,EAAaD,EAAQ,CAE1B,GADA,QAAQ,IAAIA,CAAM,EACdA,EAAO,SAAW,EAAG,CACrBF,EAAS,KAAK,CACV,MAAO,gBACP,QAAS,2EACT,aAAc,OACd,QAAS,qBACT,UAAW,OACX,gBAAiB,UACjB,OAAQ,oBACR,SAAU,UACtB,CAAS,EACD,MACH,CACD,MAAMc,EAASZ,EAAO,OAAO,CAACa,EAAQC,IAC3B,GAAGD,CAAM;AAAA;AAAA,4CAEoBC,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGxCA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,eAI1B,EAAE,EAELnB,EAAQ,UAAYiB,EAEpB,IAAIG,EAAe,gBAAiB,CAAC,aAAc,MAAO,eAAgB,EAAG,CAAC,CAClF"}